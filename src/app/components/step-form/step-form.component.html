<!-- Progress Indicator Step -->
<div *ngIf="stepObj.show" [ngClass]="[
                  (accordionExpanded && isFirst) ? 'ml-step-header-expanded-first-child':'',
                  (!accordionExpanded && isFirst) ? 'ml-step-header-first-child':'',
                  (!accordionExpanded) ? 'ml-step-header': '',
                  accordionExpanded ? 'ml-step-header-expanded': '',
                  (accordionExpanded && isLast) ? 'ml-step-header-expanded-last-child':'',
                  (!accordionExpanded && isLast) ? 'ml-step-header-last-child':'',
                  (completed && isFirst) ? 'ml-step-header-completed-first-child':'',
                  (completed && isLast) ? 'ml-step-header-completed-last-child':'',
                  completed ? 'ml-step-header-completed':'',
                  (completed && !accordionExpanded) ? 'ml-step-header-completed':''
                  ]">
  <div class="ml-step-header-elements">
    <span *ngIf="!completed"
          [ngClass]="accordionExpanded ? 'ml-step-numbers ml-current-step' : 'ml-step-numbers' ">{{stepObj.id}}</span>
    <span *ngIf="completed" class="ml-step-numbers ml-completed-step fa"></span>
    <h3 [ngClass]="accordionExpanded ? 'ml-step-header-title-expanded': 'ml-step-header-title'"
        (click)="toggleAccordion()">{{stepObj.title}}</h3>
  </div>

  <hr *ngIf="!accordionExpanded" class="ml-step-hr" [ngStyle]="{'display':  isLast ? 'none': ''}">
</div>

<div *ngIf="stepObj.show" class="ml-step-content" id="step1"
     [ngStyle]="{'border-left': isLast ? '8px solid #ffffff': ''}"
     [ngClass]="[
                  !accordionExpanded ? 'hide': '',
                  (completed && !isLast) ? 'completed': ''
                  ]">
  <div *ngIf="!stepObj.isValid" class="ml-msg ml-msg-error">
    <span class="ml-msg-txt"><span class="fa fa-exclamation-circle high-priority"></span>
      {{stepObj.message}} </span>
  </div>
  <app-error-banner *ngIf="stepObj.errors" [errors]="stepObj.errors"></app-error-banner>

  <div class="ml-step-content-div">
    <app-content-form *ngFor="let content of stepObj.contents" [form]="form" [contentObj]="content"></app-content-form>
    <div *ngIf="stepsOperations" class="operation">
      <app-operation-form *ngFor="let operation of stepsOperations" [operationObj]="operation"
                          (click)="executeOperation(operation.delegateOperation)" >

      </app-operation-form>
    </div>
    <hr class="ml-step-hr" [ngStyle]="{'display':  isLast ? 'none': ''}">
  </div>

  <jw-modal [id]= modalLoadingId
            [modalType]="'overlay'">
    <div *ngIf="showLoading" class="ml-loader-container">
      <div class="ml-loader">
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
      </div>
      <div class="ml-loader-label"><p>Guardando...</p></div>
    </div>
  </jw-modal>

  <jw-modal [id]= modalErrorId
            [modalType]="'overlay'">
    <div class="overlay-container">
      <div style="text-align: right">
      <img class="button-close" (click)="closeModal(modalErrorId)">
    </div>
      <p class="header-small"> Ha ocurrido un error con el guardado :(</p>

      <div class="operation-modal">
        <app-operation-form [operationObj]= closeWindowOpt
                            (click)="executeOperation(closeWindowOpt.delegateOperation)">
        </app-operation-form>
      </div>
    </div>
  </jw-modal>

</div>
<!-- ends Progress Indicator Step -->

