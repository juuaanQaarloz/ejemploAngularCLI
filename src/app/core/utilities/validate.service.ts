import { Injectable } from '@angular/core';

@Injectable({
  providedIn: 'root'
})
export class ValidateService {
  dateTitPattern = /(((19|20)([2468][048]|[13579][26]|0[48])|2000)\/02\/29|((19|20)[0-9]{2}\/(0[469]|11)\/(0[1-9]|[12][0-9]|30)|(19|20)[0-9]{2}\/(0[13578]|1[02])\/(0[1-9]|[12][0-9]|3[01])|(19|20)[0-9]{2}\/02\/(0[1-9]|1[0-9]|2[0-8])))/;
  datePattern = /(((0[1-9]|[12][0-9]|3[01])([/])(0[13578]|10|12)([/])(\d{4}))|(([0][1-9]|[12][0-9]|30)([/])(0[469]|11)([/])(\d{4}))|((0[1-9]|1[0-9]|2[0-8])([/])(02)([/])(\d{4}))|((29)(\.|-|\/)(02)([/])([02468][048]00))|((29)([/])(02)([/])([13579][26]00))|((29)([/])(02)([/])([0-9][0-9][0][48]))|((29)([/])(02)([/])([0-9][0-9][2468][048]))|((29)([/])(02)([/])([0-9][0-9][13579][26])))/;
  rfcPattern = /^(((([ÑA-Z|&amp;]{3}|[A-Z]{4})\d{2}((0[1-9]|1[012])(0[1-9]|1\d|2[0-8])|(0[13456789]|1[012])(29|30)|(0[13578]|1[02])31)(([ÑA-Z0-9]){2})([A-Z|0-9]{1}))$|^(([ÑA-Z|&amp;]{3}|[A-Z]{4})([02468][048]|[13579][26])0229)(\w{2})([A-Z|0-9]{1}))|([ÑA-Z|&amp;]{3}|[A-Z]{4})\d{2}((0[1-9]|1[012])(0[1-9]|1\d|2[0-8])|(0[13456789]|1[012])(29|30)|(0[13578]|1[02])31))$/;
  rfcMoralPattern = /^([A-ZÑ&]{3,4}) ?(?:- ?)?(\d{2}(?:0[1-9]|1[0-2])(?:0[1-9]|[12]\d|3[01])) ?(?:- ?)?([A-Z\d]{2})([A\d])$/;
  curpPattern = /^([A-Z]{4}([0-9]{2})((0[1-9]|1[012])(0[1-9]|1[0-9]|2[0-8])|(0[13456789]|1[012])(29|30)|(0[13578]|1[02])31)[HM](AS|BC|BS|CC|CL|CM|CS|CH|DF|DG|GT|GR|HG|JC|MC|MN|MS|NT|NL|OC|PL|QT|QR|SP|SL|SR|TC|TS|TL|VZ|YN|ZS|NE)[A-Z]{3}[0-9A-Z][0-9])$/;
  mailPattern = /^([A-Z|a-z|0-9](\.|_|-){0,1})+[A-Z|a-z|0-9]\@(?!([a-zA-Z0-9]*\.[a-zA-Z0-9]*\.[a-zA-Z0-9]*\.))(?:[A-Za-z0-9](?:[a-zA-Z0-9-]*[A-Za-z0-9])?\.)+[a-zA-Z0-9](?:[a-zA-Z0-9-]*[a-zA-Z0-9])?/;

  constructor() { }

  /**@param (String) name Name to be checked
   * @returns (boolean) returns false if the name contains no valid characters or more than 3 of the same letter consecutive
   */
  validateName(name: string): boolean {

    if (this.nullUndefinedOrEmptyValidation(name)) {
      return false;
    }

    if (/(.)\1{3,}/g.test(name)) {
      return false;
    }
    if (!/^(([A-Z0-9 Ñ.\-'])(?![A-Z0-9 Ñ.-](([A-Z0-9 Ñ.-]){})\3))+$/.test(name)) {
      return false;
    }
    return true;
  }
}
